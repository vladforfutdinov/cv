"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}!function(){function i(e){return _toConsumableArray(document.querySelectorAll(e))}function n(e){var t=e?e.replace(/^(.*?)\#(.*?)$/,"$2"):null;return e!==t?t:null}function v(e){return"string"==typeof e}function m(e,t){var n,r,a;if(Array.isArray(e)){r=e.length;for(var i=0;i<r;i+=1)if(a=e[i],n=t.call(a,a,i,e))return n}else if(!v(e))for(var o in e)if(e.hasOwnProperty(o)&&(a=e[o],n=t.call(a,a,o,e)))return n}function e(e){a.reset(),window.history.pushState("","",location.href.replace(location.hash,"")),y(l,"transitionend",function(){_()}),console.log("Error:"+e)}function g(e){return document.createElement(e)}function o(){return document.createDocumentFragment()}function A(e,t){t&&e.appendChild(t)}function t(e,t,n){C.get(e),e&&p.get("data/"+e+".json",t,n,e)}function r(e,t){function p(e){var n=o(),t=function(e){var t,n,r="";if(e.type){switch(e.type){case"phone":n="tel:";break;case"skype":n="skype:",r="?chat";break;case"email":n="mailto:";break;case"site":n="https://"}n&&(t=g("a"),b(t,{"data-type":e.type,href:n+e.value+r}),t.innerHTML=e.value)}return t}(e);return t?n.appendChild(t):e.value.split("\n").forEach(function(e){var t=g("p");t.innerHTML=e,n.appendChild(t)}),n}function y(e,t,n){var r,i,o,c,a=g("section"),s=g("h"+(t+1)),u=g("div"),d="id"+Math.random().toString().substring(2,6),l=b(g("input"),{type:"radio",id:d,name:"section","data-keywords":e.keywords}),f=b(g("label"),{for:d}),h=!!e;return h&&e.type&&b(a,{class:e.type}),h&&Array.isArray(e)?m(e,function(){A(u,y(this,t+1))}):(t<2&&(a.appendChild(l),a.appendChild(f),n===w.active&&b(l,{checked:!0})),h&&e.title&&(b(f,{"data-title":e.title}),s.innerHTML=e.title+" ",u.appendChild(s)),h&&e.value&&(Array.isArray(e.value)&&"table"!==e.type?m(e.value,function(){A(u,y(this,t+1))}):v(e.value)||void 0===e.value?u.appendChild(p(e)):"table"===e.type?u.appendChild((r=e,i=g("table"),o=i.createTHead(),c=0,m(r.value,function(){var r=g("tr"),a=this.split("\t"),e=a.length;a.forEach(function(e,t){var n=g(0===t?"th":"td");1==a.length&&n.setAttribute("colspan",c.toString()),n.innerHTML=e,r.appendChild(n)}),c=1<e?e:c,(""===a[0]?o:i).appendChild(r)}),i)):u.appendChild(y(e.value,t+1)),e.addon&&m(e.addon,function(e,t){var n={};n["data-"+t]=e,b(u,n)}),a.appendChild(u))),a.textContent?a:null}var n,r;for(var a in _(),t&&C.set(t,e),e.title&&(document.title=e.title),e.description&&(n=g("meta"),b(n,{name:"description",content:e.description}),document.getElementsByTagName("head")[0].appendChild(n)),e){e.hasOwnProperty(a)&&(r=function(e){return m(f,function(){if(this.dataset&&this.dataset.name===e)return this})}(a))&&r.appendChild(function(e){var t=g("span"),n=o();return Array.isArray(e)?m(e,function(e,t){A(n,y(this,1,t))}):v(e)?(t.innerHTML=e,n.appendChild(t)):n.appendChild(y(e,1)),n}(e[a]))}w.arr=i("[data-name=section] [type=radio]"),w.top=i("[data-name=section]")[0].offsetTop+i("[data-name=section]")[0].offsetHeight,b(i("[data-name=section] [type=radio] + label + div"),{style:"top:"+w.top+"px"}),L.addListener(w.arr,"change",function(){var e;w.reset(),w.active=(e=this,w.arr.indexOf(e))}),window.keynavHandler&&L.removeListener(window.keynavHandler),window.keynavHandler=L.addListener(window,"keydown",function(e){var t,n,r,a=e.shiftKey,i=a?u:w,o="number"==typeof(r=e).which?r.which:r.keyCode,c=39===o?1:37===o?-1:0;c&&(t=i.active+c,i.active=t<0?t===i.arr.length-1:t>i.arr.length-1?0:t,n=i.arr[i.active],a||(w.reset(),b(n,{checked:!0})))})}var c,s,u={arr:i("#nav a"),active:0},a={set:function(e){e?b(d,{lang:e}):this.reset()},get:function(e){var t=n(e)||n(u.arr[u.active].href)||"";return this.set(t),t},reset:function(){d.removeAttribute("lang")}},w={arr:[],active:0,top:0,reset:function(){return w.arr.forEach(w.arr,function(e,t){return h(w.arr[t],"checked")})}},d=document.documentElement,l=document.getElementById("nav"),f=i("[data-name]"),b=function t(e,n){if(!Array.isArray(e)){for(var r in n){var a;n.hasOwnProperty(r)&&(e[r]&&e[r].setProperty?(a=n[r].split(":"),e[r].setProperty(a[0],a[1])):(e.setAttribute(r,n[r]),e[r]=n[r]))}return e}e.forEach(function(e){return t(e,n)})},h=function(e,t){return e.removeAttribute(t)},L=(c=1,s={},{addListener:function(e,t,n,r){if(Array.isArray(e)){var a=this,i=[];return e.forEach(function(e){i.push(a._addListener(e,t,n,r))}),i}return this._addListener(e,t,n,r)},_addListener:function(e,t,n,r){function a(e){return e.addEventListener(t,n,r),s[c]={element:e,event:t,handler:n,capture:r},c++}if(!Array.isArray(e))return a(e);e.forEach(a)},removeListener:function(e){var t;Array.isArray(e)?(t=this,e.forEach(function(e){return t._removeListener(e)})):this._removeListener(e)},_removeListener:function(e){var t;e in s&&((t=s[e]).element.removeEventListener(t.event,t.handler,t.capture),delete s[e])}}),C={_storage:"undefined"!=typeof Storage?window.sessionStorage:null,get:function(e){var t;return this._storage&&(t=this._storage.getItem(e))?JSON.parse(t):null},set:function(e,t){return this._storage?this._storage.setItem(e,v(t)?t:JSON.stringify(t)):null}},p={_http:function(){var t;try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){t=!1}}return t||"undefined"==typeof XMLHttpRequest||(t=new XMLHttpRequest),t},get:function(e,t,n,r){var a=this._http();a.open("GET",e,!0),a.onreadystatechange=function(){4==a.readyState&&(200==a.status?t.call(this,JSON.parse(a.responseText),r):n.call(this,a.statusText,r))},a.send(null)}},y=function(e,n,r){e.addEventListener(n,function e(t){r.call(t),this.removeEventListener(n,e)},!1)},_=function(){f.forEach(function(e){for(;e.lastChild;)e.removeChild(e.lastChild)})};L.addListener(window,"hashchange",function(){t(a.get(window.location.href),r,e)}),a.get()&&t(a.get(window.location.href),r,e),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)})}();